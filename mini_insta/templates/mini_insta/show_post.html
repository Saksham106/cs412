<!--
  File: mini_insta/templates/mini_insta/show_post.html
  Author: Saksham Goel (saksham@bu.edu), 09/25/2025
  Description: Displays a single post with its details, including photos.
-->

{% extends "mini_insta/base.html" %}

{% block content %}

<!-- Post details -->
<h1>Post by @{{ post.profile.username }}</h1>
<p>{{ post.timestamp|date:"M j, Y g:i a" }}</p>
{% if post.caption %}<p>{{ post.caption }}</p>{% endif %}

<!-- Post actions -->
<div style="margin: 16px 0;">
    <a href="{% url 'update_post' post.pk %}" class="btn btn_primary">Update Post</a>
    <a href="{% url 'delete_post' post.pk %}" class="btn btn_secondary" style="background-color: #dc2626; color: white;">Delete Post</a>
</div>

<hr>

<!-- Photos associated with the post -->
<h2>Photos</h2>
{% for photo in post.get_all_photos %}
  <div style="margin-bottom:12px;">

      {% if photo.get_image_url %}
        <img src="{{ photo.get_image_url }}" alt="Photo {{ forloop.counter }}" style="max-width:600px;">
      {% else %}
        <p>No image available.</p>
      {% endif %}
  </div>
{% empty %}
  <p>No images for this post.</p>
{% endfor %}

<div style="margin-top: 20px; text-align: center;">
  <a href="{% url 'show_profile' post.profile.pk %}" class="btn btn_secondary">Back to profile</a>
</div>

{% endblock %}
